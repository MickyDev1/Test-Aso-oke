{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/msi/Developer/Testing/Test-Aso-oke/app/api/contact/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { Resend } from \"resend\";\n\nexport const runtime = \"nodejs\";\n\nfunction escapeHtml(input: string) {\n  return input\n    .replaceAll(\"&\", \"&amp;\")\n    .replaceAll(\"<\", \"&lt;\")\n    .replaceAll(\">\", \"&gt;\")\n    .replaceAll('\"', \"&quot;\")\n    .replaceAll(\"'\", \"&#039;\");\n}\n\nexport async function POST(req: Request) {\n  try {\n    // âœ… Create client inside the handler (avoids stale env in dev)\n    const resendKey = process.env.RESEND_API_KEY;\n    if (!resendKey) {\n      return NextResponse.json(\n        { error: \"RESEND_API_KEY not set in env.\" },\n        { status: 500 }\n      );\n    }\n    const resend = new Resend(resendKey);\n\n    const businessEmail = process.env.BUSINESS_EMAIL;\n    if (!businessEmail) {\n      return NextResponse.json(\n        { error: \"BUSINESS_EMAIL not set in env.\" },\n        { status: 500 }\n      );\n    }\n\n    const body = await req.json();\n\n    const name = String(body.name || \"\").trim();\n    const email = String(body.email || \"\").trim();\n    const subject = String(body.subject || \"\").trim();\n    const message = String(body.message || \"\").trim();\n\n    if (!name || !email || !subject || !message) {\n      return NextResponse.json(\n        { error: \"Please fill in all fields.\" },\n        { status: 400 }\n      );\n    }\n\n    // const from = \"Aso-Oke Store <onboarding@resend.dev>\";\n    const from = \"Aso-Oke Store <oladelemichael587@gmail.com>\";\n    const html = `\n      <div style=\"font-family: Arial, sans-serif; line-height: 1.6;\">\n        <h2>New Contact Form Message</h2>\n        <p><strong>Name:</strong> ${escapeHtml(name)}</p>\n        <p><strong>Email:</strong> ${escapeHtml(email)}</p>\n        <p><strong>Subject:</strong> ${escapeHtml(subject)}</p>\n        <p><strong>Message:</strong></p>\n        <p style=\"white-space: pre-wrap;\">${escapeHtml(message)}</p>\n        <hr />\n        <p style=\"color:#666;font-size:12px;\">Sent from Aso-Oke website contact page.</p>\n      </div>\n    `;\n\n    const { error } = await resend.emails.send({\n      from,\n      to: businessEmail,\n      replyTo: email,\n      subject: `Website Contact: ${subject}`,\n      html,\n    });\n\n    if (error) {\n      return NextResponse.json({ error: error.message }, { status: 500 });\n    }\n\n    return NextResponse.json({ ok: true });\n  } catch (err: any) {\n    return NextResponse.json(\n      { error: err?.message || \"Failed to send message.\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,MAAM,UAAU;AAEvB,SAAS,WAAW,KAAa;IAC/B,OAAO,MACJ,UAAU,CAAC,KAAK,SAChB,UAAU,CAAC,KAAK,QAChB,UAAU,CAAC,KAAK,QAChB,UAAU,CAAC,KAAK,UAChB,UAAU,CAAC,KAAK;AACrB;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,+DAA+D;QAC/D,MAAM,YAAY,QAAQ,GAAG,CAAC,cAAc;QAC5C,IAAI,CAAC,WAAW;YACd,OAAO,kTAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAiC,GAC1C;gBAAE,QAAQ;YAAI;QAElB;QACA,MAAM,SAAS,IAAI,uMAAM,CAAC;QAE1B,MAAM,gBAAgB,QAAQ,GAAG,CAAC,cAAc;QAChD,IAAI,CAAC,eAAe;YAClB,OAAO,kTAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAiC,GAC1C;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,OAAO,MAAM,IAAI,IAAI;QAE3B,MAAM,OAAO,OAAO,KAAK,IAAI,IAAI,IAAI,IAAI;QACzC,MAAM,QAAQ,OAAO,KAAK,KAAK,IAAI,IAAI,IAAI;QAC3C,MAAM,UAAU,OAAO,KAAK,OAAO,IAAI,IAAI,IAAI;QAC/C,MAAM,UAAU,OAAO,KAAK,OAAO,IAAI,IAAI,IAAI;QAE/C,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,WAAW,CAAC,SAAS;YAC3C,OAAO,kTAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA6B,GACtC;gBAAE,QAAQ;YAAI;QAElB;QAEA,wDAAwD;QACxD,MAAM,OAAO;QACb,MAAM,OAAO,CAAC;;;kCAGgB,EAAE,WAAW,MAAM;mCAClB,EAAE,WAAW,OAAO;qCAClB,EAAE,WAAW,SAAS;;0CAEjB,EAAE,WAAW,SAAS;;;;IAI5D,CAAC;QAED,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,OAAO,MAAM,CAAC,IAAI,CAAC;YACzC;YACA,IAAI;YACJ,SAAS;YACT,SAAS,CAAC,iBAAiB,EAAE,SAAS;YACtC;QACF;QAEA,IAAI,OAAO;YACT,OAAO,kTAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,MAAM,OAAO;YAAC,GAAG;gBAAE,QAAQ;YAAI;QACnE;QAEA,OAAO,kTAAY,CAAC,IAAI,CAAC;YAAE,IAAI;QAAK;IACtC,EAAE,OAAO,KAAU;QACjB,OAAO,kTAAY,CAAC,IAAI,CACtB;YAAE,OAAO,KAAK,WAAW;QAA0B,GACnD;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}